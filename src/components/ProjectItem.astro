---
interface Props {
    title: string;
    description: string;
    link?: string;
    icon: string;
    index: number;
    banner?: string; // image URL
    tags?: string[]; // optional tags
}

const {
    title,
    description,
    link,
    icon,
    index,
    banner,
    tags = [],
} = Astro.props;
const number = String(index + 1).padStart(2, "0");
---

<div
    class="group border border-gray-300/60 dark:border-gray-800-80 hover:bg-gray-200/50 dark:hover:bg-gray-900/40 rounded transition-colors overflow-hidden"
    role="listitem"
>
    {/* Optional Banner */}
    {
        banner && (
            <div class="relative w-full aspect-[5/1] overflow-hidden">
                <img
                    src={banner}
                    alt={`${title} banner`}
                    class="w-full h-full object-cover"
                    loading="lazy"
                />
                <div class="absolute inset-0 bg-gradient-to-b from-black/40 to-black/80" />
            </div>
        )
    }

    <div class="p-1">
        {
            link ? (
                <a
                    href={link}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="block focus:outline-none rounded"
                    aria-label={`Visit ${title}: ${description}`}
                >
                    <div class="flex items-start gap-2">
                        <span
                            class="text-muted w-6 shrink-0"
                            aria-hidden="true"
                        >
                            {number}.
                        </span>

                        <span
                            class="text-yellow-360 shrink-0"
                            role="img"
                            aria-label="Project icon"
                        >
                            {icon}
                        </span>

                        <div class="min-w-0 flex-1">
                            <span class="text-secondary group-hover:text-accent font-semibold block sm:inline">
                                {title}
                            </span>

                            <span class="text-muted sm:ml-2 block sm:inline mt-1 sm:mt-0">
                                → {description}
                            </span>

                            {/* Tags */}
                            {tags.length > 0 && (
                                <div class="flex flex-wrap gap-2 mt-1">
                                    {tags.map((tag) => (
                                        <span class="text-xs bg-gray-300/50 dark:bg-gray-800/60 text-muted px-2 py-0.5 rounded">
                                            {tag}
                                        </span>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                </a>
            ) : (
                <div
                    class="flex items-start gap-2 opacity-60"
                    aria-label={`${title}: ${description}`}
                >
                    <span class="text-muted w-6 shrink-0" aria-hidden="true">
                        {number}.
                    </span>

                    <span
                        class="text-yellow-360 shrink-0"
                        role="img"
                        aria-label="Project icon"
                    >
                        {icon}
                    </span>

                    <div class="min-w-0 flex-1">
                        <span class="text-secondary font-semibold block sm:inline">
                            {title}
                        </span>

                        <span class="text-muted sm:ml-2 block sm:inline mt-1 sm:mt-0">
                            → {description}
                        </span>

                        <span class="text-muted/70 sm:ml-2 block sm:inline">
                            [soon]
                        </span>

                        {/* Tags */}
                        {tags.length > 0 && (
                            <div class="flex flex-wrap gap-2 mt-1">
                                {tags.map((tag) => (
                                    <span class="text-xs bg-gray-300/50 dark:bg-gray-800/60 text-muted px-2 py-0.5 rounded">
                                        {tag}
                                    </span>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            )
        }
    </div>
</div>
