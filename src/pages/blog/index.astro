---
import { getCollection } from "astro:content";
import Card from "../../components/ui/Card.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import { sortMDByDate } from "../../utils";
import TerminalPrompt from "../../components/ui/TerminalPrompt.astro";
import SectionHeading from "../../components/ui/SectionHeading.astro";
import PostList from "../../components/ui/PostList.astro";

const allPosts = await getCollection("blog");
const allPostsByDate = sortMDByDate(allPosts);
---

<BaseLayout title="Blog" navbarActiveItemID="blog">
  <section aria-label="Posts">
    <Card>
      <SectionHeading as="h1">üìù Posts</SectionHeading>

      {
        allPostsByDate.length === 0 ? (
          <div class="flex items-center gap-4 mb-6">
            <p class="text-4xl">üîç</p>
            <div class="flex flex-col">
              <h1 class="text-yellow-400 text-2xl font-bold">404</h1>
              <p class="text-muted text-xs">No available posts</p>
            </div>
          </div>
        ) : (
          <PostList posts={allPostsByDate} />
        )
      }

      <TerminalPrompt
        command={`ls -la blog/ | total ${allPostsByDate.length}`}
      />
    </Card>
  </section>
</BaseLayout>
